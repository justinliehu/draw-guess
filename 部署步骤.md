# 部署到 Render 具体操作步骤

按下面一步步做，即可把「你画我猜」部署到公网。

---

## 第一步：把项目推到 GitHub

### 1.1 确保已安装 Git

- 打开 [https://git-scm.com](https://git-scm.com) 下载安装（Windows 选默认即可）。
- 装好后打开 **命令提示符** 或 **PowerShell**，输入 `git --version` 能看到版本号即可。

### 1.2 在项目文件夹里初始化仓库（如果还没有）

在 **命令提示符 / PowerShell** 里执行：

```bash
cd C:\Users\justi\Desktop\games
```

然后看是否已有 `.git` 文件夹：

- **如果没有**（第一次用 Git 管理这个项目），执行：
  ```bash
  git init
  git add .
  git commit -m "你画我猜 线上版 初版"
  ```
- **如果已经有**（例如之前 clone 过或 init 过），只需确认代码已提交：
  ```bash
  git status
  ```
  若有未提交的修改，执行：
  ```bash
  git add .
  git commit -m "更新部署配置"
  ```

### 1.3 在 GitHub 上新建仓库

1. 打开 [https://github.com](https://github.com)，登录你的账号。
2. 右上角 **+** → **New repository**。
3. 填写：
   - **Repository name**：例如 `draw-guess-online`（可自取）。
   - **Public**。
   - **不要**勾选 “Add a README file”等（你本地已有文件）。
4. 点 **Create repository**。

### 1.4 把本地项目推上去

创建好后，GitHub 会显示 “Quick setup” 的几行命令。在**项目目录**里执行（把 `你的用户名` 和 `draw-guess-online` 换成你自己的仓库地址）：

```bash
cd C:\Users\justi\Desktop\games
git remote add origin https://github.com/你的用户名/draw-guess-online.git
git branch -M main
git push -u origin main
```

- 第一次会弹出浏览器或提示登录 GitHub，按提示完成即可。
- 若仓库名不是 `draw-guess-online`，把上面地址里的仓库名改成你的。

完成后，在 GitHub 网页上刷新，应能看到所有项目文件（如 `index-standalone.html`、`server.cjs`、`render.yaml` 等）。

---

## 第二步：在 Render 上部署

### 2.1 注册 / 登录 Render

1. 打开 [https://render.com](https://render.com)。
2. 点 **Get Started for Free**，用 **GitHub 账号**登录并授权（推荐，这样可以直接选仓库）。

### 2.2 新建 Web Service 并连接仓库

1. 登录后进入 **Dashboard**，点 **New +** → **Web Service**。
2. 在 “Connect a repository” 里：
   - 若已授权 GitHub，会看到你的仓库列表，找到 **draw-guess-online**（或你起的名字），点 **Connect**。
   - 若没看到，点 **Configure account** 去连接 GitHub，再回来选仓库。
3. 连接成功后，Render 会识别到仓库里的 **render.yaml**，并自动填好部分配置。

### 2.3 检查 / 填写配置

在创建页面上确认或填写：

| 项 | 建议值 | 说明 |
|----|--------|------|
| **Name** | `draw-guess-online` 或自取 | 服务名称，会出现在 URL 里 |
| **Region** | 选离你近的（如 Singapore） | 免费版可选区域 |
| **Branch** | `main` | 部署的分支 |
| **Runtime** | **Node** | 必须选 Node |
| **Build Command** | 留空 或 `echo 'no build'` | 本项目不需要构建 |
| **Start Command** | `node server.cjs` | **必须一致**，否则服务起不来 |
| **Plan** | **Free** | 免费即可 |

若页面顶部有 “We found a render.yaml” 的提示，可直接用 **Apply** 使用 yaml 里的配置，再检查上面几项是否一致。

### 2.4 创建并等待部署

1. 点 **Create Web Service**。
2. 进入该服务的详情页，Render 会自动开始 **Build** 再 **Deploy**。
3. 等 1～2 分钟，直到顶部状态变成 **Live**（绿色）。
4. 页面上会有一个 **URL**，形如：  
   `https://draw-guess-online-xxxx.onrender.com`

### 2.5 验证是否成功

在浏览器打开：

- 首页：`https://你的服务名.onrender.com/`  
  （应跳转或显示游戏页）
- 游戏页：`https://你的服务名.onrender.com/index-standalone.html`

能正常打开、能进大厅、能连钱包或匿名登录，即表示部署成功。把这个 **https 地址** 记下来，后面用 Bubblewrap 打 APK 时要填这个域名。

---

## 常见问题

**Q：Build 失败，报错找不到 `server.cjs`？**  
- 确认仓库根目录下就有 `server.cjs`、`index-standalone.html`、`render.yaml`，没有多一层目录（例如没有把整个项目放在一个子文件夹里再 push）。

**Q：Deploy 成功但打开网页是 404？**  
- 访问时加上路径：`/index-standalone.html`。  
- 若希望根路径 `/` 就进游戏，你本地的 `server.cjs` 里已经写了 `if (filePath === '/') filePath = '/index-standalone.html'`，部署的若是当前版本，根路径应能进游戏；若仍不行，可暂时用 `/index-standalone.html`。

**Q：免费版会休眠吗？**  
- Render 免费版一段时间没人访问会休眠，第一次打开可能要等几十秒“冷启动”，属正常现象。

**Q：想用 Railway / Fly.io？**  
- 思路一样：连 GitHub 仓库，选 Node 运行时，**Start Command** 填 `node server.cjs`，根目录要包含 `server.cjs` 和前端文件。具体按钮位置和名称按各平台界面操作即可。

按上述做完，你就完成了「推到 GitHub + Render 部署」；之后打 APK、上架 dApp Store 继续按 **DEPLOY-SOLANA-DAPP-STORE.md** 里的第三步、第四步做即可。
